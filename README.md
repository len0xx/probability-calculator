# Вычисление вероятностей с игральными костями

Данный репозиторий представляет исходный код решения пазла с платформы CodinGame: [Ссылка на пазл](https://www.codingame.com/ide/puzzle/dice-probability-calculator)

Исходный код можно увидеть [здесь](https://github.com/len0xx/probability-calculator/blob/main/calculator.cpp)

### Описание решения

В этом пазле для сохранения удобочитаемости и общей понятности кода было не обойтись без применения ООП. Поэтому код получился довольно громоздким, но зато интересным и полезным. По сути, на основе этой программы можно написать программу для полноценного вычисления почти любых математических выражений. При именовании переменных и аргументов функций я старался делать названия максимально простыми и понятными английскими словами.

Теперь о решении самого пазла. В функции `main` можно увидеть всего четыре действия: чтение строки из стандартного ввода, создание экземпляра класса `Expression` и выполнение двух методов этого класса - вычисление (`evaluate`) и печать ответа (`printAnswer`). При конструировании `expression` выполняется парсинг входной строки и преобразование её в список так называемых токенов (`Token`). Далее начинается само вычисление выражения. В классе `Operation` прописана основная логика для выполнения разных операций с разными типами операндов (`INTEGER` - целое число или `DICE` - бросок игровой кости).

Для более чистого и читаемого кода я описал два перечисляемых типа - `SymbolType` (Тип символа или токена) и `Priority` (Приоритет операций).

Все действия выполняются поочередно (до тех пор, пока не закончатся неразрешённые операторы) в соответствии с поставленными приоритетами операций (Сначала действия в скобках, потом умножение, сложение и сравнение). Все вычисления операций над целыми числами выполняются, очевидно, по законам арифметики. А когда хотя бы один из операндов является сущностью типа `DICE`, тогда в игру вступают законы теории вероятностей и определённая этим пазлом механика операций над этим типом сущности (сложение или умножение бросков кости). После вычислений всех операций в поле `entities` (сущности) класса `Expression` останется один объект, который и является ответом.

В итоге, в зависимости от типа ответа (целое число или массив вероятных чисел), на экран выводится одна или несколько строк с вероятностями результата введённого выражения. Ответы выводятся в отсортированном по значению порядке.
